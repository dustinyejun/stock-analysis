# 选股规则详细规范

## 规则一：黄金坑大阳线突破策略

### 策略描述
识别经历深度调整后出现反转信号的股票，寻找"黄金坑"形态。

### 技术条件
1. **深度调整识别**: 股价从前期高点下跌超过20%
   - 前期高点定义：60个交易日内的最高价
   - 下跌幅度计算：(当前价格 - 前期高点) / 前期高点 ≤ -20%

2. **大阳线确认**: 坑底出现大阳线
   - 大阳线标准：当日涨幅 ≥ 5%
   - 放量要求：当日成交量/5日均量 ≥ 1.5

3. **趋势确认**: 股价站上10日均线
   - 突破条件：收盘价 > 10日移动平均价

### 算法实现要点
```python
# 1. 计算60日内最高价
high_60d = data['high'].rolling(60).max()

# 2. 计算跌幅
decline_rate = (current_price - recent_high) / recent_high

# 3. 识别大阳线和放量
big_yang = (daily_return >= 0.05) & (volume_ratio >= 1.5)

# 4. 确认突破10日均线
ma10 = data['close'].rolling(10).mean()
above_ma10 = current_price > ma10
```

## 规则二：多头趋势持续放量突破策略

### 策略描述
识别处于上升趋势中持续放量并突破前期高点的强势股票。

### 技术条件
1. **多头趋势确认**: 股价处于上升通道
   - 均线排列：20日均线 > 60日均线
   - 价格位置：股价 > 20日均线

2. **连续大阳线**: 连续出现涨幅较大的阳线
   - 大阳线标准：单日涨幅 ≥ 3%
   - 连续要求：至少连续2天

3. **持续放量**: 成交量连续放大超过2个交易日
   - 放量标准：每日成交量 > 10日平均成交量的1.3倍
   - 持续要求：连续2天以上

4. **突破前期高点**: 股价突破8个月内形成的高点
   - 前期高点定义：240个交易日（约8个月）内的最高价
   - 突破确认：收盘价 > 前期高点 且 成交量放大

### 算法实现要点
```python
# 1. 判断多头趋势
ma20 = data['close'].rolling(20).mean()
ma60 = data['close'].rolling(60).mean()
bullish_trend = (ma20.iloc[-1] > ma60.iloc[-1]) and (current_price > ma20.iloc[-1])

# 2. 检查连续大阳线
consecutive_yang = check_consecutive_condition(daily_return >= 0.03, min_days=2)

# 3. 检查持续放量
volume_avg = data['volume'].rolling(10).mean()
consecutive_volume = check_consecutive_condition(volume_ratio >= 1.3, min_days=2)

# 4. 确认突破240日高点
high_240d = data['high'].rolling(240).max()
breakthrough = current_price > high_240d
```

## 输出格式规范

### 必须包含字段
- **股票代码**: 6位数字代码
- **股票名称**: 中文股票名称  
- **当前价格**: 最新收盘价
- **触发日期**: 符合条件的日期
- **关键指标数值**: 各项技术指标的具体数值
- **符合条件原因**: 简要说明为什么符合条件

### 规则一输出示例
```
股票代码    股票名称    当前价格    触发日期    前期高点    最大跌幅    大阳线涨幅    10日均线
000001     平安银行    12.34      2024-08-25   15.67      -21.2%     6.8%        12.10
```

### 规则二输出示例  
```
股票代码    股票名称    当前价格    触发日期    前期高点    突破幅度    连续放量天数    平均量比
600036     招商银行    43.21      2024-08-25   42.85      +0.8%      3天          1.65
```